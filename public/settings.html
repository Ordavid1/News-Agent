<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - News Agent</title>
    <meta name="description" content="Configure your News Agent settings and automation preferences.">
    <!-- Prevent indexing of authenticated pages -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#a855f7">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/styles/output.css">
    <link rel="stylesheet" href="/styles/cookieConsent.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glow-purple: #a855f7;
            --glow-pink: #ec4899;
            --glow-blue: #3b82f6;
            --glow-cyan: #06b6d4;
        }
        
        body {
            font-family: 'Space Grotesk', sans-serif;
            background: #0a0a0a;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
        }
        
        .glow-text {
            background: linear-gradient(to right, var(--glow-purple), var(--glow-pink), var(--glow-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 30px rgba(168, 85, 247, 0.5));
        }
        
        .neon-border {
            position: relative;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            border: 2px solid transparent;
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)),
                              linear-gradient(45deg, var(--glow-purple), var(--glow-pink), var(--glow-blue), var(--glow-cyan));
            background-origin: border-box;
            background-clip: padding-box, border-box;
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.3);
        }
        
        .magic-button {
            background: linear-gradient(to right, var(--glow-purple), var(--glow-pink));
            transition: all 0.3s ease;
        }
        
        .magic-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
        }
        
        input[type="checkbox"]:checked {
            background: linear-gradient(to right, var(--glow-purple), var(--glow-pink));
            border-color: var(--glow-purple);
        }
    </style>
</head>
<body class="bg-black text-white min-h-screen">
    <!-- Header -->
    <header class="gradient-bg border-b border-purple-500/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold glow-text">AI News Agent</h1>
                </div>
                <a id="backLink" href="/profile.html" class="text-gray-400 hover:text-purple-400 transition-colors">
                    â† Back to Dashboard
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pb-12">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-12">
            <!-- Agent Mode Header (shown when editing an agent) -->
            <div id="agentModeHeader" class="hidden mb-6 p-4 rounded-lg bg-purple-500/10 border border-purple-500/30">
                <div class="flex items-center gap-4">
                    <div id="agentPlatformIcon" class="w-12 h-12 rounded-xl flex items-center justify-center">
                        <!-- Platform icon will be inserted here -->
                    </div>
                    <div>
                        <p class="text-sm text-gray-400">Configuring Agent</p>
                        <h3 id="agentNameDisplay" class="text-xl font-bold text-white">Agent Name</h3>
                        <p id="agentPlatformDisplay" class="text-sm text-purple-400 capitalize">Platform</p>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h2 id="settingsTitle" class="text-4xl font-bold mb-2 glow-text">Configure Your News Agent</h2>
                <p id="settingsSubtitle" class="text-gray-400">Customize how your AI agent discovers and posts trending content</p>
            </div>

            <form id="settingsForm" class="space-y-8">
                <!-- Agent Identity Section -->
                <div class="neon-border p-6">
                    <h3 class="text-xl font-semibold mb-4 text-purple-400">ğŸ¤– Agent Identity</h3>
                    <p class="text-gray-400 text-sm mb-4">Name your agent - select target platforms in the Platform Settings section below</p>

                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Agent Name</label>
                        <input type="text"
                               id="agentName"
                               name="agentName"
                               placeholder="e.g., Tech News Bot"
                               class="w-full md:w-1/2 px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500 text-white placeholder-gray-500">
                        <p class="text-xs text-gray-500 mt-2">Give your agent a memorable name</p>
                    </div>

                    <!-- Validation message -->
                    <div id="agentIdentityError" class="hidden mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30">
                        <p class="text-red-400 text-sm" id="agentIdentityErrorText"></p>
                    </div>
                </div>

                <!-- Topic Categories -->
                <div class="neon-border p-6">
                    <h3 class="text-xl font-semibold mb-4 text-purple-400">ğŸ“° Topic Categories</h3>
                    <p class="text-gray-400 text-sm mb-4">Select the topics your agent will track</p>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                            <input type="checkbox" name="topics" value="technology" class="rounded bg-black/50 border-purple-500/30">
                            <span>ğŸ’» Technology</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                            <input type="checkbox" name="topics" value="business" class="rounded bg-black/50 border-purple-500/30">
                            <span>ğŸ’¼ Business</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                            <input type="checkbox" name="topics" value="entertainment" class="rounded bg-black/50 border-purple-500/30">
                            <span>ğŸ¬ Entertainment</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                            <input type="checkbox" name="topics" value="sports" class="rounded bg-black/50 border-purple-500/30">
                            <span>âš½ Sports</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                            <input type="checkbox" name="topics" value="health" class="rounded bg-black/50 border-purple-500/30">
                            <span>ğŸ¥ Health</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                            <input type="checkbox" name="topics" value="science" class="rounded bg-black/50 border-purple-500/30">
                            <span>ğŸ”¬ Science</span>
                        </label>
                    </div>
                </div>

                <!-- Keyword Filter -->
                <div class="neon-border p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-purple-400">#ï¸âƒ£ Keyword Filter</h3>
                        <span id="keywordCounter" class="text-gray-500 text-sm">0/10</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">Add keywords to filter news articles. Separate multiple keywords with commas. These work alongside topic categories for more precise content discovery.</p>
                    <div class="space-y-4">
                        <div class="flex gap-2">
                            <input type="text" id="keywordInput" placeholder="e.g., AI, crypto, startup, innovation"
                                class="flex-1 px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500 text-white placeholder-gray-500">
                            <button type="button" id="addKeywordBtn" class="px-4 py-3 bg-purple-600 hover:bg-purple-500 rounded-lg transition-colors">
                                Add
                            </button>
                        </div>
                        <div id="keywordTags" class="flex flex-wrap gap-2">
                            <!-- Keywords will be rendered here as tags -->
                        </div>
                        <p class="text-gray-500 text-xs">Type keywords separated by commas, or press Enter to add. Click the X on a tag to remove it.</p>
                    </div>
                </div>

                <!-- Geographic Filter -->
                <div class="neon-border p-6">
                    <h3 class="text-xl font-semibold mb-4 text-purple-400">ğŸŒ Geographic Filter</h3>
                    <p class="text-gray-400 text-sm mb-4">Filter news articles by geographic region. Select a region to focus on news from specific areas.</p>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Primary Region</label>
                            <select name="geoRegion" class="w-full px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500">
                                <option value="">ğŸŒ Global (No Filter)</option>
                                <option value="us">ğŸ‡ºğŸ‡¸ United States</option>
                                <option value="gb">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                <option value="eu">ğŸ‡ªğŸ‡º Europe</option>
                                <option value="ca">ğŸ‡¨ğŸ‡¦ Canada</option>
                                <option value="au">ğŸ‡¦ğŸ‡º Australia</option>
                                <option value="in">ğŸ‡®ğŸ‡³ India</option>
                                <option value="de">ğŸ‡©ğŸ‡ª Germany</option>
                                <option value="fr">ğŸ‡«ğŸ‡· France</option>
                                <option value="jp">ğŸ‡¯ğŸ‡µ Japan</option>
                                <option value="br">ğŸ‡§ğŸ‡· Brazil</option>
                                <option value="mx">ğŸ‡²ğŸ‡½ Mexico</option>
                                <option value="za">ğŸ‡¿ğŸ‡¦ South Africa</option>
                                <option value="sg">ğŸ‡¸ğŸ‡¬ Singapore</option>
                                <option value="ae">ğŸ‡¦ğŸ‡ª United Arab Emirates</option>
                                <option value="il">ğŸ‡®ğŸ‡± Israel</option>
                            </select>
                        </div>
                        <div>
                            <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                                <input type="checkbox" name="includeGlobalNews" checked class="rounded bg-black/50 border-purple-500/30">
                                <span>Include global/international news alongside regional news</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Posting Schedule -->
                <div class="neon-border p-6">
                    <h3 class="text-xl font-semibold mb-4 text-pink-400">â° Posting Schedule</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Posts per day</label>
                            <select name="postsPerDay" class="w-full px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500">
                                <option value="3">3 posts</option>
                                <option value="5">5 posts</option>
                                <option value="10">10 posts</option>
                                <option value="15">15 posts</option>
                                <option value="20">20 posts</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Active hours</label>
                            <div class="grid grid-cols-2 gap-4">
                                <input type="time" name="startTime" value="09:00" class="px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500">
                                <input type="time" name="endTime" value="21:00" class="px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Style -->
                <div class="neon-border p-6">
                    <h3 class="text-xl font-semibold mb-4 text-cyan-400">âœ¨ Content Style</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Tone of voice</label>
                            <select name="tone" class="w-full px-4 py-3 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500">
                                <option value="professional">ğŸ© Professional</option>
                                <option value="casual">ğŸ˜ Casual</option>
                                <option value="humorous">ğŸ˜„ Humorous</option>
                                <option value="educational">ğŸ“š Educational</option>
                            </select>
                        </div>
                        <div>
                            <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                                <input type="checkbox" name="includeHashtags" checked class="rounded bg-black/50 border-purple-500/30">
                                <span>Include trending hashtags #ï¸âƒ£</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Platform Settings (hidden in agent mode) -->
                <div class="neon-border p-6" data-section="platforms">
                    <h3 class="text-xl font-semibold mb-4 text-purple-400">ğŸŒ Platform Settings</h3>
                    <p class="text-gray-400 text-sm mb-4">Select which connected platforms to post to</p>
                    <div class="space-y-4">
                        <div class="neon-border p-4">
                            <label class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #1DA1F2, #14171A);">
                                        <span class="text-white font-bold">ğ•</span>
                                    </div>
                                    <div>
                                        <p class="font-medium">Twitter/X</p>
                                        <p class="text-sm text-gray-400">Post trending content</p>
                                    </div>
                                </div>
                                <input type="checkbox" name="platforms" value="twitter" class="rounded bg-black/50 border-purple-500/30">
                            </label>
                            <!-- Twitter Premium option (shown when Twitter is enabled) -->
                            <div id="twitterPremiumConfig" class="mt-4 pt-4 border-t border-purple-500/20 hidden">
                                <label class="flex items-center gap-2 cursor-pointer hover:text-purple-400 transition-colors">
                                    <input type="checkbox" name="twitterPremium" id="twitterPremium" class="rounded bg-black/50 border-purple-500/30">
                                    <span>I have Twitter/X Premium</span>
                                </label>
                                <p class="text-xs text-gray-500 mt-2">Premium users can post up to 4,000 characters. Standard accounts are limited to 280 characters.</p>
                            </div>
                        </div>
                        <label class="flex items-center justify-between p-4 neon-border cursor-pointer">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #0077B5, #00A0DC);">
                                    <span class="text-white font-bold">in</span>
                                </div>
                                <div>
                                    <p class="font-medium">LinkedIn</p>
                                    <p class="text-sm text-gray-400">Professional content</p>
                                </div>
                            </div>
                            <input type="checkbox" name="platforms" value="linkedin" class="rounded bg-black/50 border-purple-500/30">
                        </label>
                        <div class="neon-border p-4">
                            <label class="flex items-center justify-between cursor-pointer">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #FF4500, #FF5700);">
                                        <span class="text-white font-bold">r/</span>
                                    </div>
                                    <div>
                                        <p class="font-medium">Reddit</p>
                                        <p class="text-sm text-gray-400">Post to subreddits</p>
                                    </div>
                                </div>
                                <input type="checkbox" name="platforms" value="reddit" class="rounded bg-black/50 border-purple-500/30">
                            </label>
                            <!-- Subreddit selection (shown when Reddit is enabled) -->
                            <div id="redditSubredditConfig" class="mt-4 pt-4 border-t border-purple-500/20 hidden">
                                <label class="block text-sm text-gray-400 mb-2">Target Subreddit <span class="text-red-400">*</span> <span class="text-gray-600">(required)</span></label>
                                <div class="flex items-center gap-2">
                                    <span class="text-gray-500">r/</span>
                                    <input type="text"
                                           id="redditSubreddit"
                                           name="redditSubreddit"
                                           placeholder="e.g., technology"
                                           pattern="^[a-zA-Z0-9_]{1,21}$"
                                           maxlength="21"
                                           class="flex-1 px-4 py-2 bg-black/50 border border-purple-500/30 rounded-lg focus:outline-none focus:border-purple-500 text-white placeholder-gray-500">
                                </div>
                                <p class="text-xs text-gray-500 mt-2">You must specify a subreddit to post to (e.g., technology, news, worldnews).</p>
                                <p id="redditSubredditError" class="text-xs text-red-400 mt-1 hidden">Please enter a subreddit name</p>
                            </div>
                        </div>
                        <label class="flex items-center justify-between p-4 neon-border cursor-pointer">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #1877F2, #3b5998);">
                                    <span class="text-white font-bold">f</span>
                                </div>
                                <div>
                                    <p class="font-medium">Facebook</p>
                                    <p class="text-sm text-gray-400">Share to pages and groups</p>
                                </div>
                            </div>
                            <input type="checkbox" name="platforms" value="facebook" class="rounded bg-black/50 border-purple-500/30">
                        </label>
                        <label class="flex items-center justify-between p-4 neon-border cursor-pointer">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: #0088cc;">
                                    <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                                    </svg>
                                </div>
                                <div>
                                    <p class="font-medium">Telegram</p>
                                    <p class="text-sm text-gray-400">Post to channels and groups</p>
                                </div>
                            </div>
                            <input type="checkbox" name="platforms" value="telegram" class="rounded bg-black/50 border-purple-500/30">
                        </label>
                    </div>
                    <!-- Connection status hint -->
                    <div id="connectionHint" class="mt-4 p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30 hidden">
                        <p class="text-yellow-400 text-sm" id="connectionHintText"></p>
                    </div>
                </div>

                <!-- Save Button -->
                <div class="flex justify-end gap-4">
                    <button type="button" onclick="window.location.href='/profile.html'" class="px-8 py-3 border border-purple-500/30 text-gray-400 rounded-full font-semibold hover:border-purple-500 hover:text-white transition-all duration-200">
                        Cancel
                    </button>
                    <button type="submit" class="magic-button px-8 py-3 text-white rounded-full font-semibold">
                        ğŸ’¾ Save Settings
                    </button>
                </div>
            </form>
        </div>
    </main>

    <script src="js/settings.js"></script>
    <script src="/js/cookieConsent.js"></script>
</body>
</html>